import { ethers } from "hardhat";

async function deploy() {
  const Verifier = await ethers.getContractFactory("PlonkVerifier");
  const verifier = await Verifier.deploy();

  const ZKWordo = await ethers.getContractFactory("ZKWordo");
  const zkWordo = await ZKWordo.deploy(verifier.address);

  await zkWordo.deployed();

  console.log(
    `zkWordo deployed at ${zkWordo.address}`
  );

  return zkWordo.address;
}

async function guess() {
  const address = await deploy();
  const zkWordo = await ethers.getContractAt("ZKWordo", address);

  const proof = "0x1cae706929db940f3c7413a907736473c1f0b3fa086ecb688db84e9f1b9a01a40aa57f2a9b86cee46f415020130d2938d4f2d1c031f030593ba7a015e33b50360861ae4ab42b2224211da03b51d3d7822c77b903e0164190751f1c8226b3eec42942cf2ba635d9be480a3df889529382dc6b7f6e37c0eedd6c95e398f13058311866219619afb177b77c3bcaf5dd53c035ffba795fa29ab26f24c5e170737c5c197dc1c2cc2b5ed31065b4ab6a5a77c578dd875cfec74277ffe816dbe66c375501c01055ec24d445c2a0fc6252b8c32c9dc92b11626b5b5ab1c958a054e2653819275eca7806b7024450ace01f83b2b0f14d8e8589c7f4d985fbe884b5d4585801cc9dfe864780afc869ee975f09ac69b6670923982cb88a8149b13aa6208f60008ccfbb67efdd83af0206f7a72fd7e29a054858e2ced2fb6830dc49df204cf720df0a26b487ff37a1bf93fcce0b6e3d6f21e47f48c77e60ae095274040c6a3222ad77bdf69793804051f9c41d8e98de550c105132ba6f0375f3f66b09f05fe22118c3168e072b9d6a3b4436bb03a893f58fd93ccfa20b3dd2bde21a04f9512d27476d79cf3ecd6e9984496cade27d3782b7490669a0926bc85131e41bd62db31ee409c21fff70b4282b7efd3fff8cd9d57aaca015a2dcc626a747d15492631f04efe49a1133bab4dd2493eaafd5ec6fc6b58e689006a6f23b909414376fc3dd16292b8e8b64652888dbe8d592ecf6b7098d94fe382eda4f09bae06604e8374006fcd5d5466e9b3900798c0566a5110fb06a1f6a329c5c6e20a84e0a7a3c9c8e1b2866cfa8b12a019b84853342e4f112dd5e8a60506ea6f23a3f23f528fe2426097021865b9c663db711ebb61c2f0946e5dbfe28f6e6cdf70d93939591bfb043167249a8861be27e5d863bb85d2fc1102018bf7092ecea9002cf61962f31aff10981927d8c9487c28214677c16758a74ef049790133b5ce26f9b679e74f0e7281dd50d00dd17b5d9cfcd5b9835e5d1f01776d9d5d71165ac668e1e7fc21bcb2e0d853f279d5f6329d3f24b8ac6842641821ca1ebf67ea384860af91f17357c9314940c772f23a8f26325b5555297ac8fbedecb96e85d497d7bab763d3bcbc624";

  await zkWordo.guess(proof, {
    value: ethers.utils.parseEther("0.01")
  });
}

guess().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
